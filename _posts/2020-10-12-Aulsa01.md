# NLW-Next-Level-Week #3
# Aula 1 (12/10/2020): Proffy-Web

<ul>
{% for post in site.posts %}
<li>
<a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a>
</li>
{% endfor %}
</ul>

Durante o evento Next Level Week #3, foi desenvolvido a projeto Happy, que √© uma plataforma de visita a orfanatos, conectando pacientes com volutanriado para realizar visitas online, tendo um mapa para v√°rios servi√ßos que acolhem Crian√ßas e Adolescentes com seus hor√°rios dispon√≠veis para que os pacientes possam receber visitas de maneira adequada. Trazendo uma representa√ß√£o e homenagem para o dia das crian√ßas, que √© comemorado no dia 12 de outubro no Brasil.

### üõ† Days e Techs

| Dia | Descri√ßao | tecnologias |
|:---:|---------|:-----------:|
|  **12/10**  |**Acelerando sua evolu√ß√£o**| ![npm](https://img.shields.io/npm/v/react?color=black&label=React&logo=react)  ![npm](https://img.shields.io/npm/v/typescript?color=black&label=Typescript&logo=typescript&logoColor=blue) |
|  **13/10**  |**Olhando as oportunidades**| ![npm](https://img.shields.io/npm/v/typeorm?color=black&label=multer&logo=multer&logoColor=lightblue)  ![npm](https://img.shields.io/npm/v/typeorm?color=black&label=typeorm&logo=wolfram&logoColor=orange)           |
|  **14/10**  |**A escolha da stack**|    ![npm](https://img.shields.io/npm/v/axios?color=black&label=Axios&logo=insomnia&logoColor=purple)   ![npm](https://img.shields.io/npm/v/sqlite3?color=black&label=Sqlite3&logo=sqlite&logoColor=Blue)     |
|  **15/10**  | **At√© 2 anos em 2 meses**|   ![npm](https://img.shields.io/npm/v/react-native?color=black&label=React-Native&logo=react) ![npm](https://img.shields.io/npm/v/expo?color=black&label=Expo&logo=expo)            |
|  **16/10**  | **A milha extra** | ![npm](https://img.shields.io/npm/v/express?color=black&label=Express&logo=node.js) ![npm](https://img.shields.io/npm/v/typeorm?color=black&label=yup&logo=yup&logoColor=yellow) 
 

O NodeJS tem que ser vers√£o 12 ou superior, para consultar digite:
node -v

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/nodeversion.png" alt="Image" width="400px" />
</p>

T√≥picos abordados nesta aula:
- Apresenta√ß√£o do projeto
- Conceitos de back-end, front-end e API
- O que √© React e por que utilizar?
- Por que vamos usar Typescript?
- Criando projeto com ReacJS
- Componentes, JSX e propriedades
- Trabalhando com rotas
- Criando a landing page
- Criando Mapa Page

### Apresenta√ß√£o do projeto

Nesta edi√ß√£o do NLW, n√£o utilizamos a metodologia Mobile First pois n√£o temos prioridade da aplica√ß√£o ser responsiva. Mas teremos uma aplica√ß√£o personalizada para cada cidade por geolocaliza√ß√£o.
 
<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/landinghappy.png" alt="Image" width="600px" />
</p>	

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/layoutweb.png" alt="Image" width="100%" />
</p>

O foco dessa NLW n√£o √© ter muita features, mas abordar mais a quest√£o de boas pr√°ticas, c√≥digo mais escal√°vel, valida√ß√£o ou outros t√≥picos n√£o abordados em outros NLW (como valida√ß√£o).
 
<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/layoutmobile01.png" alt="Image" width="500px" />
</p>

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/layoutmobile02.png" alt="Image" width="500px" />
</p>

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/la3youtmobile0.png" alt="Image" width="500px" />
</p>
 
### Conceitos de back-end, front-end e API

Foi explicado com uma ferramenta de Flowchart chamada [Whimsical](https://whimsical.com/):
 
<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/whimsical.png" alt="Image" width="500px" />
</p>
 
A cada requisi√ß√£o carregava todo o HTML, CSS e JS do servidor. N√£o havia muita distin√ß√£o entre Back e Front-End.
  
<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/retfull.png" alt="Image" width="100%" />
</p>
 

Na API Restul foi adicionado uma camada a mais que constr√≥i o HTML quando recebe dados enviados pelo Back-End em resposta requisi√ß√µes enviadas (orfanatos). Essa solu√ß√£o apresenta um melhor SOC (Separation of Concerns), pois no modelo um h√° uma sobrecarga do servidor passando-lhe tarefas de renderiza√ß√£o de HTML. Na API RESTful, como retorna uma lista em JSON o desacoplamento e a reutiliza√ß√£o de c√≥digo para construir aplica√ß√µes mobile. 

REST trata-se de uma abstra√ß√£o da arquitetura da Web. Resumidamente, o REST consiste em princ√≠pios/regras/constraints que, quando seguidas, permitem a cria√ß√£o de um projeto com interfaces bem definidas. Desta forma, permitindo, por exemplo, que aplica√ß√µes se comuniquem.

O HTTP √© o principal protocolo de comunica√ß√£o para sistemas Web, existente h√° mais de 20 anos, e em todo esse tempo sofreu algumas atualiza√ß√µes. Nos anos 2000, um dos principais autores do protocolo HTTP, Roy Fielding, sugeriu, dentre outras coisas, o uso de novos m√©todos HTTP. Estes m√©todos visavam resolver problemas relacionados a sem√¢ntica quando requisi√ß√µes HTTP eram feitas.

Estas sugest√µes permitiram o uso do HTTP de uma forma muito mais pr√≥xima da nossa realidade, dando sentido √†s requisi√ß√µes HTTP. Para melhor compreens√£o, veja os exemplos abaixo (requisi√ß√µes em formatos fict√≠cios):
- **GET**: http://www.meusite.com/usuarios
- **DELETE**: http://www.meusite.com/usuarios/jackson
- **POST**: http://www.meusite.com/usuarios ‚Äìdata {nome: joaquim}

Existe uma certa confus√£o quanto aos termos REST e RESTful. Entretanto, ambos representam os mesmo princ√≠pios. A diferen√ßa √© apenas gramatical. Em outras palavras, sistemas que utilizam os princ√≠pios REST s√£o chamados de RESTful.
- **REST**: conjunto de princ√≠pios de arquitetura
- **RESTful**: capacidade de determinado sistema aplicar os princ√≠pios de REST.

### Por que usar TypeScript

Realiza tipagem no Javascript, habilita o intellisense, quando definimos uma interface.
  
<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/intellisense.png" alt="Image" width="600px" />
</p>
 

Ajuda a detectar erros enos guia informando que campos precisamos informar.
  
<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/typescripterros.png" alt="Image" width="100%" />
</p>
  
### Criando projeto com ReacJS

Tem coisas do React que n√£o s√£o entendidas nativamente pelos browsers, ao utilizar o create-react-app inclue no seu projeto:

- **BabelJS** √© um transpiler de JavaScript que transpila novos recursos em padr√µes antigos. Com isso, os recursos podem ser executados em navegadores antigos e novos, sem complica√ß√µes. Babeljs vem com uma ampla gama de recursos na forma de plug-ins, predefini√ß√µes, polyfills, etc. Resumindo, Babeljs √© um conjunto de ferramentas que possui todas as ferramentas necess√°rias dispon√≠veis com ele e que ajuda os desenvolvedores a usar todos os recursos atuais dispon√≠veis no ECMA Script e ainda n√£o se preocupam como ser√° suportado nos navegadores.
- **Webpack** √© um empacotador de m√≥dulo que empacota todos os m√≥dulos com depend√™ncias - js, estilos, imagens, etc. em ativos est√°ticos .js, .css, .jpg, .png, etc. Webpack vem com predefini√ß√µes que ajudam na compila√ß√£o na forma necess√°ria. Por exemplo, a predefini√ß√£o de rea√ß√£o que ajuda a obter a sa√≠da final na forma de rea√ß√£o, a predefini√ß√£o es2015 ou env que ajuda a compilar o c√≥digo em ES5 ou 6 ou 7, etc. 

Execute um dos seguintes comandos:

```bash
yarn create react-app web --template typescript
OU
npx create-react-app web --template typescript
```
<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/create-react.png" alt="Image" width="100%" />
</p>


Abra a aplica√ß√£o no VS Code Do template criado pelo React apague os seguintes arquivos do diret√≥rio pois n√£o seria utilizado no curso:
- README.md: Arquivo de informa√ß√µes de descri√ß√£o do projeto no formato Markdown (md) utilizado pelo Git.
- Scr>App.css: Arquivo de estilo de p√°gina local (vai ser criado estilo global)
- Scr>index.css: Arquivo de estilo de p√°gina local (vai ser criado estilo global)
- Scr>App.test.tsx: Arquivo de Testes.
- Scr>Logo.svg: Image de logo do React.
- Scr>serviceWorker.ts: Usado quando a aplica√ß√£o √© um PWA (Progressive Web App)
- Scr>setupTests.ts: Arquivo de Testes.
- Deixe somente o arquivo index.html na pasta p√∫blic com o seguinte c√≥digo:

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/arquivoindex.png" alt="Image" width="100%" />
</p>

O App.tsx e o index.tsx ficam com os seguintes conte√∫dos.

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/app_index.png" alt="Image" width="700px" />
</p>

Repare que nos arquivos tsx precisamos sempre importar a biblioteca React. No arquivo index.tsx temos o ReactDOM que se encarrega de renderizar os elementos em HTML. A √°rvore de elementos em HTML de uma p√°gina que vemos ao chamar a ferramento Inspector de um navegador pode ser chamada de DOM. Ao executar a aplica√ß√£o com:
```bash
npm start
```

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/helloworld.png" alt="Image" width="700px" />
</p>
 

### Componentes, JSX e propriedades

O m√©todo render do ReactDOM recebe como par√¢metros tags HTML ou componentes REACT. Todo componente tem a estrutura de uma fun√ß√£o que retorna HTML ou JSX. O JSX √© uma maneira de incluir HTML dentro do Javazcript.

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/jsx.png" alt="Image" width="100%" />
</p>
 

Dentro de um elemento no HTML, em document.getElementById(‚Äúroot‚Äù), foi colocado na div com id=root no arquivo index.html. Podemos fazer concatena√ß√£o ou agrega√ß√£o de componentes, abaixo o componente App utiliza outro componente Title.

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/agregacao.png" alt="Image" width="700px" />
</p>

Quando passamos atributos ao componente ele se torna propriedades. Mas precisamos criar uma interface para que o Typescript consiga realizar a identifica√ß√£o do tipo. Os coomopnetes possibilitam a reutiliza√ß√£o de c√≥digo e v√°rias p√°ginas.

### Trabalhando com rotas

Crie uma pasta pages dentro de src e inclua duas p√°ginas, Landing.tsx e OrphanagesMap.tsx, que iremos utilizar na navega√ß√£o

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/rotalanding.png" alt="Image" width="100%" />
</p>

Agora para navegar entre p√°ginas temos que instalar:
```bash
yarn add react-router-dom OU npm install react-router-dom
```

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/react-router.png" alt="Image" width="100%" />
</p>

Inclu√≠mos um arquivo routes.tsx para configurar as rotas e na hora de importar emite um aviso para instalar outro pacote, 

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/arquivoroutes.png" alt="Image" width="500px" />
</p>


Colocamos o par√¢metro ‚ÄìD para indicar que √© uma depend√™ncia de desenvolvimento e n√£o vai ser utilizada na produ√ß√£o

```bash
yarn add @types/react-router-dom ‚ÄìD  OU  npm install @types/react-router-dom -D
```

Depois de instalarmos esse pacote aparece o Inteligesense quando digitamos:

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/inteligesenseroutes.png" alt="Image" width="700px" />
</p>


O c√≥digo da fun√ß√£o Routes ficar√° assim:

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/routespage.png" alt="Image" width="100%" />
</p>

Repare na primeira rota que navega para raiz tem uma propriedade exact. Isso √© para diferenciar das outras rotas que tamb√©m cont√©m a barra para frente, ent√£o a p√°gina inicial apareceria em todas as outras p√°ginas. A tag Switch √© uma tag opcional garante que apenas uma rota seja chamada de cada vez.

Se alterarmos agora a p√°gina inicial App.tsx e a p√°gina Landing.tsx as rotas j√° estar√£o funcionando.
 

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/routesworking.png" alt="Image" width="700px" />
</p>

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/landing_map_pages.png" alt="Image" width="100%" />
</p>
 

Por√©m de formos em Network da ferramenta Inspector do browser podemos ver que a cada navega√ß√£o est√° havendo o Refresh e carregamento da p√°gina inteira (css, scripts) e n√£o queremos isso.
<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/inspectnetwork.png" alt="Image" width="100%" />
</p>
  

Para resolver isso temos que importar de react-router-dom o componente Link e substitui-lo pelas anchor tags do HTML.
 
<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/anchortags.png" alt="Image" width="500px" />
</p>

E inv√©s de href fica to:
 
<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/href_to.png" alt="Image" width="500px" />
</p>

Ao salvar e testar n√£o est√° recarregando mais nada ao mudar de p√°gina. Esse √© o conceito de SPA (Single Page Application). N√£o tem que ficar recarregando recursos compartilhados da mesma aplica√ß√£o.
 
### Criando Landing Page

As imagens da aplica√ß√£o ser√£o exportadas diretamente em formato SVG do modelo Figma fornecido. 

<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/figmalanfing.png" alt="Image" width="100%" />
</p> 

Depois de exportar a imagens, salve em uma pasta imagens dentro da pasta src.
 
<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/imagenslandng.png" alt="Image" width="500px" />
</p>

Para associar fontes ao projeto s√≥ precisa ir no site do [Google Fonts](https://fonts.google.com/)
 
<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/nunitofont.png" alt="Image" width="800px" />
</p>

Depois de selecionar as fontes abaixo, clicamos em Embedd e copiamos o link e colamos em public/index.html:

```bash
nunito Semi-bold 600
nunito Bold 700
nunito Extra-bold 800
```
<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/embeddedfont.png" alt="Image" width="100%" />
</p>

Depois de incluirmos as fontes, crie um arquivo de estilo global.css dentro da pasta style com o seguinte conte√∫do:
 
<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/globalstyle.png" alt="Image" width="600px" />
</p>

Estamos aplicando a fonte Nunito em v√°rios elementos da tela, com fallback para uma fonte sem serifa. Depois fazemos a importa√ß√£o desse estilo no arquico App.tsx.
```bash
import './styles/global.css';
```

Alterando nossa p√°gina Landing.tsx com o conte√∫do:
 
<p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/landingpage.png" alt="Image" width="700px" />
</p>

Aqui, para incluirmos √≠cones na aplica√ß√£o instalamos a biblioteca react-icons com o comando:

```bash
npm install react-icons
```

Dentro de react-icons encontra-se v√°rios pacotes de icons como o Material Design(md), Font Awesome(fa), etc. Utilizamos o FeatherIcons (fi), para colocarmos a seta se navega√ß√£o entre p√°ginas.

 <p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/react-icons.png" alt="Image" width="100%" />
</p>

 
Crie um folha de estilo chamada landing.css dentro de style/pages para a Landing page

 <p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/landingstyle
.png" alt="Image" width="700px" />
</p>

E termos a p√°gina inicial pronta:

 <p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/landingready.png" alt="Image" width="600px" />
</p>


### Criando Mapa Page

Na p√°gina OrphanageMap.tsx temos o seguinte conte√∫do:

 <p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/orphanagemap.png" alt="Image" width="100%" />
</p>
 

H√° algumas formas de incluir gratuitamente mapas em seu aplicativo React:
1.	**Google Maps**
2.	**React-leaflet**
3.	**Mapbox**

### React-leaflet

Para utilizar o react-leaflet precisamos instalar:
```bash
npm install leaflet react-leaflet
```

 <p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/react-leaflet.png" alt="Image" width="600px" />
</p>
 
E fazemos a chamada para o mapa em nossa p√°gina OrphanageMap.tsx:
```bash
import { Map, TileLayer } from 'react-leaflet';
import 'leaflet/dist/leaflet.css';

<Map
    center={[-23.525384, -46.669296]}
    zoom={15}
    style={{ width: '100%', height: '100%' }}>
    <TileLayer url={`https://a.tile.openstreetmap.org/{z}/{x}/{y}.png`}/>                    
</Map>
```

√â necess√°rio importar tamb√©m o TileLayer, que √© um servidor onde recupera as imagens do mapa, e o estilo do mapa em leaflet.css. O atributo center √© a posi√ß√£o do mapas que pode ser obtido pelas coordenadas fornecidas pelo Google Maps, clicando com o bot√£o direito do mouse no lugar ou na √°rea no mapa e selecionando ‚ÄúO que h√° aqui?‚Äù.

 <p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/mapaselecionando.png" alt="Image" width="500px" />
</p>
 
Ao atualizarmos a p√°gina j√° teremos a visualiza√ß√£o do mapa. Por√©m, como a interface visual do Leaflet √© bastante carregada voc√™ pode optar por utilizar o MapBox que oferece um variedade maior de estilos. 

 <p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/variedademapas.png" alt="Image" width="600px" />
</p>
 
### Mapbox

Mapbox √© um provedor americano de mapas on-line personalizados para sites e aplicativos como Foursquare, Lonely Planet, Facebook, Financial Times, The Weather Channel e Snapchat. Desde 2010, ele expandiu rapidamente o nicho de mapas personalizados, em resposta √† escolha limitada oferecida por fornecedores de mapas como o Google Maps.

Para utilizar o MapBox voc√™ precisa criar uma conta no site [Mapbox](https://www.mapbox.com/)

 <p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/mapboxsite.png" alt="Image" width="600px" />
</p>

Entre na p√°gina de account e copie o acesstoken
 
 <p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/acesstoken.png" alt="Image" width="600px" />
</p>

Como o token √© uma informa√ß√£o de acesso privado, que n√£o queremos compartilhar em reposit√≥rios p√∫blicos como o GitHub, precisamos criar um arquivo .env
 
 <p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/arquivo_env.png" alt="Image" width="600px" />
</p>

Neste arquivo criamos var√°veis ambiente, que customizamos de acordo com o ambiente de desenvolvimento (Desenvolvimento ou produ√ß√£o). Toda vari√°vel ambiente no React precisa come√ßar com REACT_APP. E no gitignore, inclu√≠mos o arquivo .env para ser ignorado e n√£o expor nossas informa√ß√µes.

 <p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/gitignore.png" alt="Image" width="600px" />
</p>

Para carregar as vari√°veis de ambiente precisamos parar a aplica√ß√£o e reinicia-la. Para utilizar o MapBox utilizamos ainda os componentes do react-leaflet mas trocamos as informa√ß√µes do TileLayer.

```bash
<Map
    center={[-23.525384, -46.669296]}
    zoom={15}
    style={{ width: '100%', height: '100%' }}>

    <TileLayer
        url={`https://api.mapbox.com/styles/v1/mapbox/light-v10/tiles/256/{z}/{x}/{y}@2x?access_token=${process.env.REACT_APP_MAPBOX_TOKEN}`}
    />
</Map>
```

Repare que, como agora vamos utilizar a vari√°vel de ambiente, o valor de url deve estar dentro de chaves. Os seguintes estilos de caixa de mapas est√£o dispon√≠veis para todas as contas usando um token de acesso v√°lido:
- streets-v11
- outdoors-v11
- light-v10
- dark-v10
- satellite-v9
- satellite-roads-v11

 <p align="center">
  <img src="https://raw.githubusercontent.com/shyoutarou/NLW-Next-Level-Week-3/master/.github/estilosmapbox.png" alt="Image" width="700px" />
</p>

